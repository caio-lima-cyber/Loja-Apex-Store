<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Supermercado Apex</title>
  <style>
    body {
      background-color: #007BFF;
      color: white;
      font-family: Arial, sans-serif;
      padding: 20px;
    }

    h1, h2 {
      text-align: center;
    }

    .produtos {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
    }

    .produto {
      background: #ffffff20;
      padding: 15px;
      border-radius: 10px;
      width: 250px;
      text-align: center;
    }

    .produto img {
      width: 100%;
      height: 160px;
      object-fit: cover;
      border-radius: 8px;
      margin: 10px 0;
    }

    input, select, textarea {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
    }

    button {
      padding: 10px;
      background-color: #28a745;
      color: white;
      font-weight: bold;
      border: none;
      margin-top: 10px;
      cursor: pointer;
      width: 100%;
    }

    .formulario, .pagamento, .recibo {
      background: #ffffff20;
      margin: 20px auto;
      padding: 20px;
      max-width: 600px;
      border-radius: 10px;
    }

    .hidden {
      display: none;
    }

  </style>
</head>
<body>

  <h1>üõí Supermercado Apex</h1>
  <h2>Ofertas de 2025</h2>

  <form id="form-produtos" class="produtos"></form>

  <div class="formulario" id="formulario">
    <h2>Cadastro (opcional para desconto)</h2>
    <label>Nome:</label><input type="text" id="nome">
    <label>Sobrenome:</label><input type="text" id="sobrenome">
    <label>Data de nascimento:</label><input type="date" id="nascimento">
    <label>Telefone:</label><input type="tel" id="telefone">
    <label>CPF:</label><input type="text" id="cpf">
    <label>Endere√ßo:</label><input type="text" id="endereco">
    <label>Bairro:</label><input type="text" id="bairro">
    <label>Ponto de Refer√™ncia:</label><input type="text" id="referencia">
    <button type="button" onclick="concluirCadastro()">Concluir Cadastro</button>
  </div>

  <div class="pagamento" id="pagamento">
    <h2>Forma de Pagamento</h2>
    <select id="metodo">
      <option value="pix">Pix</option>
      <option value="credito">Cart√£o de Cr√©dito</option>
      <option value="debito">Cart√£o de D√©bito</option>
      <option value="especie">Esp√©cie</option>
    </select>
    <button onclick="finalizarCompra()">Finalizar Compra</button>
  </div>

  <div class="recibo hidden" id="recibo">
    <h2>üßæ Nota Fiscal / Comprovante</h2>
    <div id="detalhes-compra"></div>
    <h3>Obrigado pela compra e volte sempre!</h3>
  </div>

  <script>
    const produtos = [
      { nome: "Arroz 5kg", preco: 24.50, validade: "10/12/2025", imagem: "file:///D:/Users/Aluno/Pictures/Arroz-Branco.jpg" },
      { nome: "Feij√£o 1kg", preco: 5.00, validade: "15/11/2025", imagem: "file:///D:/Users/Aluno/Pictures/feijao.jpg" },
      { nome: "Macarr√£o 500g", preco: 3.50, validade: "20/10/2025", imagem: "file:///D:/Users/Aluno/Pictures/macarrao.jpg" },
      { nome: "√ìleo 900ml", preco: 8.00, validade: "01/03/2026", imagem: "file:///D:/Users/Aluno/Pictures/oleo.jpg" },
      { nome: "Leite 1L", preco: 3.00, validade: "18/09/2025", imagem: "file:///D:/Users/Aluno/Pictures/leite.jpg" },
      { nome: "A√ß√∫car 1kg", preco: 2.75, validade: "30/12/2025", imagem: "file:///D:/Users/Aluno/Pictures/acucar.jpg" },
      { nome: "Sal 1kg", preco: 1.50, validade: "25/11/2026", imagem: "file:///D:/Users/Aluno/Pictures/sal.jpg" },
      { nome: "Caf√© 500g", preco: 15.00, validade: "10/10/2025", imagem: "file:///D:/Users/Aluno/Pictures/cafe.jpg " },
      { nome: "Biscoito", preco: 3.99, validade: "15/01/2026", imagem: "file:///D:/Users/Aluno/Pictures/biscoito.jpg" },
      { nome: "Detergente", preco: 2.99, validade: "01/07/2026", imagem: "file:///D:/Users/Aluno/Pictures/detergente.jpg" }
    ];

    let desconto = false;

    function carregarProdutos() {
      const form = document.getElementById("form-produtos");
      produtos.forEach((produto, i) => {
        const div = document.createElement("div");
        div.className = "produto";
        div.innerHTML = `
          <input type="checkbox" id="prod-${i}" name="produto" value="${i}">
          <label for="prod-${i}"><strong>${produto.nome}</strong></label>
          <img src="${produto.imagem}" alt="${produto.nome}">
          <p>Pre√ßo: R$ ${produto.preco.toFixed(2)}</p>
          <p>Validade: ${produto.validade}</p>
          <label>Quantidade:</label>
          <input type="number" id="qtd-${i}" value="1" min="1">
        `;
        form.appendChild(div);
      });
    }

    function calcularIdade(data) {
      const nascimento = new Date(data);
      const hoje = new Date();
      let idade = hoje.getFullYear() - nascimento.getFullYear();
      const mes = hoje.getMonth() - nascimento.getMonth();
      if (mes < 0 || (mes === 0 && hoje.getDate() < nascimento.getDate())) {
        idade--;
      }
      return idade;
    }

    function concluirCadastro() {
      const data = document.getElementById("nascimento").value;
      if (!data) {
        alert("Preencha sua data de nascimento.");
        return;
      }
      const idade = calcularIdade(data);
      if (idade >= 18) {
        desconto = true;
        alert("Cadastro v√°lido! Voc√™ recebeu 30% de desconto.");
      } else {
        desconto = false;
        alert("Cadastro inv√°lido ou menor de idade. Compra sem desconto.");
      }
    }

    function finalizarCompra() {
      const selecionados = document.querySelectorAll('input[name="produto"]:checked');
      if (selecionados.length === 0) {
        alert("Selecione pelo menos um produto.");
        return;
      }

      let total = 0;
      let detalhes = "";

      selecionados.forEach(el => {
        const index = parseInt(el.value);
        const produto = produtos[index];
        const quantidade = parseInt(document.getElementById(`qtd-${index}`).value) || 1;
        const pergunta = document.getElementById(`pergunta-${index}`).value;
        const subtotal = produto.preco * quantidade;

        total += subtotal;

        detalhes += `
          <p><strong>${produto.nome}</strong><br>
          Quantidade: ${quantidade}<br>
          Pre√ßo Unit√°rio: R$ ${produto.preco.toFixed(2)}<br>
          Subtotal: R$ ${subtotal.toFixed(2)}<br>
          Pergunta: ${pergunta || "Nenhuma"}</p>
        `;
      });

      if (desconto) {
        detalhes += `<p><strong>Desconto aplicado: 30%</strong></p>`;
        total *= 0.7;
      }

      const metodo = document.getElementById("metodo").value;
      detalhes += `<p><strong>Forma de pagamento:</strong> ${metodo.toUpperCase()}</p>`;

      if (metodo === "pix" || metodo === "credito" || metodo === "debito") {
        detalhes += `<p><strong>Comprovante gerado.</strong></p>`;
      }

      detalhes += `<p><strong>Total a pagar: R$ ${total.toFixed(2)}</strong></p>`;

      document.getElementById("detalhes-compra").innerHTML = detalhes;
      document.getElementById("recibo").classList.remove("hidden");
    }

    window.onload = carregarProdutos;
  </script>
</body>
</html>
